I"’<p>= Send a mail on gmail via python
:hp-tags: python, mail
:hp-image: /images/cat.jpg</p>

<p>Code to send a mail via gmail with an attachment</p>

<h2 id="sourcepython">[source,python]</h2>
<p>import smtplib
from email.MIMEMultipart import MIMEMultipart
from email.MIMEText import MIMEText
from email.MIMEBase import MIMEBase
from email import encoders</p>

<p>fromaddr = â€œâ€
toaddr = â€œâ€
PASSWORD = â€œâ€</p>

<p>msg = MIMEMultipart()</p>

<p>msg[â€˜Fromâ€™] = fromaddr
msg[â€˜Toâ€™] = toaddr
msg[â€˜Subjectâ€™] = â€œpython testâ€</p>

<p>body = â€œ"â€Hey bro, thatâ€™s a test ! \o/â€â€â€</p>

<p>msg.attach(MIMEText(body, â€˜plainâ€™))</p>

<p>filename = â€œtest.zipâ€
attachment = open(râ€™D://test.zipâ€™, â€œrbâ€)</p>

<p>part = MIMEBase(â€˜applicationâ€™, â€˜octet-streamâ€™)
part.set_payload((attachment).read())
encoders.encode_base64(part)
part.add_header(â€˜Content-Dispositionâ€™, â€œattachment; filename= %sâ€ % filename)</p>

<p>msg.attach(part)</p>

<p>server = smtplib.SMTP(â€˜smtp.gmail.comâ€™, 587)
server.starttls()
server.login(fromaddr, PASSWORD)
text = msg.as_string()
server.sendmail(fromaddr, toaddr, text)
server.quit()
â€”-</p>
:ET